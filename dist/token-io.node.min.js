!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babel-regenerator-runtime"),require("tweetnacl"),require("fast-sha256"),require("base64url"),require("json-stable-stringify"),require("axios"),require("es6-promise")):"function"==typeof define&&define.amd?define("token-io.node",["babel-regenerator-runtime","tweetnacl","fast-sha256","base64url","json-stable-stringify","axios","es6-promise"],t):"object"==typeof exports?exports["token-io.node"]=t(require("babel-regenerator-runtime"),require("tweetnacl"),require("fast-sha256"),require("base64url"),require("json-stable-stringify"),require("axios"),require("es6-promise")):e["token-io.node"]=t(e["babel-regenerator-runtime"],e.tweetnacl,e["fast-sha256"],e.base64url,e["json-stable-stringify"],e.axios,e["es6-promise"])}(this,function(e,t,n,r,a,u,o){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),e.exports=n(2)},function(e,t){e.exports=require("babel-regenerator-runtime")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),i=r(o),s=n(8),c=r(s),l=n(9),f=r(l),d=n(16),h=r(d),y=n(10),v=r(y),p=n(26),m=r(p),g=n(22),_=r(g),k=n(27),b=r(k);n(1),n(28).polyfill();var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prd";a(this,e),this._env=t,this._unauthenticatedClient=new m.default(t),this.Crypto=i.default,this.Util=c.default,this.KeyLevel=h.default,this.TokenOperationResult=_.default}return u(e,[{key:"usernameExists",value:function(e){var t=this;return c.default.tryToDo(this.usernameExists,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.usernameExists(e));case 2:return n=r.sent,r.abrupt("return",!!n.data.exists&&n.data.exists);case 4:case"end":return r.stop()}},null,t)})}},{key:"createMember",value:function(e){var t=this;return c.default.tryToDo(this.createMember,function(){var n,r,a;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return n=i.default.generateKeys(),u.next=3,regeneratorRuntime.awrap(t._unauthenticatedClient.createMemberId());case 3:return r=u.sent,u.next=6,regeneratorRuntime.awrap(t._unauthenticatedClient.addFirstKey(n,r.data.memberId));case 6:return a=new f.default(t._env,r.data.memberId,n),u.next=9,regeneratorRuntime.awrap(a.addUsername(e));case 9:return u.abrupt("return",a);case 10:case"end":return u.stop()}},null,t)})}},{key:"login",value:function(e,t){var n=this;return c.default.tryToDo(this.login,function(){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new f.default(n._env,e,t));case 1:case"end":return r.stop()}},null,n)})}},{key:"loginWithUsername",value:function(e,t){var n=this;return c.default.tryToDo(this.loginWithUsername,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(new b.default(n._env,t,e).getMemberByUsername());case 2:return r=a.sent,a.abrupt("return",new f.default(n._env,r.data.member.id,e));case 4:case"end":return a.stop()}},null,n)})}},{key:"loginFromLocalStorage",value:function(){var e=this;return c.default.tryToDo(this.loginFromLocalStorage,function(){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v.default.loadMember(e._env));case 1:case"end":return t.stop()}},null,e)})}},{key:"notifyLinkAccounts",value:function(e,t,n,r){var a=this,u={linkAccounts:{bankId:t,bankName:n,accountLinkPayloads:r}};return c.default.tryToDo(this.notifyLinkAccounts,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(a._unauthenticatedClient.notify(e,u));case 2:return t=n.sent,n.abrupt("return",t.data.status);case 4:case"end":return n.stop()}},null,a)})}},{key:"notifyAddKey",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={addKey:{publicKey:i.default.strKey(t),name:r}};return c.default.tryToDo(this.notifyAddKey,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(n._unauthenticatedClient.notify(e,a));case 2:return t=r.sent,r.abrupt("return",t.data.status);case 4:case"end":return r.stop()}},null,n)})}},{key:"notifyLinkAccountsAndAddKey",value:function(e,t,n,r,a){var u=this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s={linkAccountsAndAddKey:{linkAccounts:{bankId:t,bankName:n,accountLinkPayloads:r},addKey:{publicKey:i.default.strKey(a),name:o}}};return c.default.tryToDo(this.notifyLinkAccountsAndAddKey,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(u._unauthenticatedClient.notify(e,s));case 2:return t=n.sent,n.abrupt("return",t.data.status);case 4:case"end":return n.stop()}},null,u)})}}]),e}();e.exports=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),i=r(o),s=n(5),c=r(s),l=n(6),f=r(l),d=n(7),h=r(d),y=function(){function e(){a(this,e)}return u(e,null,[{key:"generateKeys",value:function(){var e=i.default.sign.keyPair();return e.keyId=(0,f.default)((0,c.default)(e.publicKey)).substring(0,16),e}},{key:"signJson",value:function(t,n){return e.sign((0,h.default)(t),n)}},{key:"sign",value:function(e,t){var n=new Buffer(e);return(0,f.default)(i.default.sign.detached(n,t.secretKey))}},{key:"strKey",value:function(e){return(0,f.default)(e)}},{key:"bufferKey",value:function(e){return f.default.toBuffer(e)}}]),e}();t.default=y},function(e,t){e.exports=require("tweetnacl")},function(e,t){e.exports=require("fast-sha256")},function(e,t){e.exports=require("base64url")},function(e,t){e.exports=require("json-stable-stringify")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),i=r(o),s=n(6),c=r(s),l=function(){function e(){a(this,e)}return u(e,null,[{key:"generateNonce",value:function(){return(0,c.default)(i.default.sign.keyPair().publicKey)}},{key:"countDecimals",value:function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0}},{key:"tryToDo",value:function(e,t){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(t());case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),n.abrupt("return",Promise.reject({type:e.name,error:n.t0,reason:void 0!==n.t0.response&&void 0!==n.t0.response.data?n.t0.response.data:"UNKNOWN"}));case 9:case"end":return n.stop()}},null,this,[[0,6]])}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),i=r(o),s=n(10),c=r(s),l=n(11),f=r(l),d=n(14),h=r(d),y=n(15),v=r(y),p=n(16),m=r(p),g=n(17),_=r(g),k=n(12),b=r(k),w=n(22),T=r(w),x=n(23),R=r(x),A=n(24),I=r(A),O=n(25),S=r(O),D=n(8),P=r(D),E=n(19),M=function(){function e(t,n,r){a(this,e),this._id=n,this._keys=r,this._client=new _.default(t,n,r)}return u(e,[{key:"saveToLocalStorage",value:function(){c.default.saveMember(this)}},{key:"useAccessToken",value:function(e){this._client.useAccessToken(e)}},{key:"clearAccessToken",value:function(){this._client.clearAccessToken()}},{key:"approveKey",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.default.PRIVILEGED;return P.default.tryToDo(this.approveKey,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=a.sent,a.next=5,regeneratorRuntime.awrap(t._client.addKey(r,i.default.bufferKey(e),n));case 5:return a.abrupt("return");case 6:case"end":return a.stop()}},null,t)})}},{key:"removeKey",value:function(e){var t=this;return P.default.tryToDo(this.removeKey,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return n=r.sent,r.next=5,regeneratorRuntime.awrap(t._client.removeKey(n,e));case 5:return r.abrupt("return");case 6:case"end":return r.stop()}},null,t)})}},{key:"addUsername",value:function(e){var t=this;return P.default.tryToDo(this.addUsername,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return n=r.sent,r.next=5,regeneratorRuntime.awrap(t._client.addUsername(n,e));case 5:return r.abrupt("return");case 6:case"end":return r.stop()}},null,t)})}},{key:"removeUsername",value:function(e){var t=this;return P.default.tryToDo(this.removeUsername,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return n=r.sent,r.next=5,regeneratorRuntime.awrap(t._client.removeUsername(n,e));case 5:return r.abrupt("return");case 6:case"end":return r.stop()}},null,t)})}},{key:"linkAccounts",value:function(e,t){var n=this;return P.default.tryToDo(this.linkAccounts,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._client.linkAccounts(e,t));case 2:return r=a.sent,a.abrupt("return",r.data.accounts.map(function(e){return new f.default(n,e)}));case 4:case"end":return a.stop()}},null,n)})}},{key:"getAccounts",value:function(){var e=this;return P.default.tryToDo(this.getAccounts,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._client.getAccounts());case 2:return t=n.sent,n.abrupt("return",t.data.accounts.map(function(t){return new f.default(e,t)}));case 4:case"end":return n.stop()}},null,e)})}},{key:"subscribeToNotifications",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"IOS";return P.default.tryToDo(this.subscribeToNotifications,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._client.subscribeToNotifications(e,n));case 2:return r=a.sent,a.abrupt("return",new h.default(r.data.subscriber));case 4:case"end":return a.stop()}},null,t)})}},{key:"getSubscribers",value:function(){var e=this;return P.default.tryToDo(this.getSubscribers,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._client.getSubscribers());case 2:return t=n.sent,n.abrupt("return",t.data.subscribers.map(function(e){return new h.default(e)}));case 4:case"end":return n.stop()}},null,e)})}},{key:"getSubscriber",value:function(e){var t=this;return P.default.tryToDo(this.getSubscriber,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.getSubscriber(e));case 2:return n=r.sent,r.abrupt("return",new h.default(n.data.subscriber));case 4:case"end":return r.stop()}},null,t)})}},{key:"unsubscribeFromNotifications",value:function(e){var t=this;return P.default.tryToDo(this.unsubscribeFromNotifications,function(){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.unsubscribeFromNotifications(e));case 2:return n.abrupt("return");case 3:case"end":return n.stop()}},null,t)})}},{key:"addAddress",value:function(e,t){var n=this;return P.default.tryToDo(this.addAddress,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._client.addAddress(e,t));case 2:return r=a.sent,a.abrupt("return",new v.default(r.data.address));case 4:case"end":return a.stop()}},null,n)})}},{key:"getAddress",value:function(e){var t=this;return P.default.tryToDo(this.getAddress,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.getAddress(e));case 2:return n=r.sent,r.abrupt("return",new v.default(n.data.address));case 4:case"end":return r.stop()}},null,t)})}},{key:"getAddresses",value:function(){var e=this;return P.default.tryToDo(this.getAddresses,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._client.getAddresses());case 2:return t=n.sent,n.abrupt("return",t.data.addresses.map(function(e){return new v.default(e)}));case 4:case"end":return n.stop()}},null,e)})}},{key:"getAllUsernames",value:function(){var e=this;return P.default.tryToDo(this.getAllUsernames,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._getMember());case 2:return t=n.sent,n.abrupt("return",t.usernames);case 4:case"end":return n.stop()}},null,e)})}},{key:"createAccessToken",value:function(e){var t=this;return P.default.tryToDo(this.createAccessToken,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.createToken(e.from(t).json));case 2:return n=r.sent,r.abrupt("return",I.default.createFromToken(n.data.token));case 4:case"end":return r.stop()}},null,t)})}},{key:"replaceAccessToken",value:function(e,t){var n=this;return P.default.tryToDo(this.replaceAccessToken,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._client.replaceToken(e,t));case 2:return r=a.sent,a.abrupt("return",new T.default(r.data.result,I.default.createFromToken(r.data.result.token)));case 4:case"end":return a.stop()}},null,n)})}},{key:"replaceAndEndorseAccessToken",value:function(e,t){var n=this;return P.default.tryToDo(this.replaceAndEndorseAccessToken,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._client.replaceAndEndorseToken(e,t));case 2:return r=a.sent,a.abrupt("return",new T.default(r.data.result,I.default.createFromToken(r.data.result.token)));case 4:case"end":return a.stop()}},null,n)})}},{key:"createToken",value:function(e,t,n,r){var a=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=R.default.create(this,e,t,n,r,u);return P.default.tryToDo(this.createToken,function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(a._client.createToken(o.json));case 2:return e=t.sent,t.abrupt("return",R.default.createFromToken(e.data.token));case 4:case"end":return t.stop()}},null,a)})}},{key:"getToken",value:function(e){var t=this;return P.default.tryToDo(this.getToken,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.getToken(e));case 2:if(n=r.sent,void 0===n.data.token.payload.access){r.next=7;break}return r.abrupt("return",I.default.createFromToken(n.data.token));case 7:return r.abrupt("return",R.default.createFromToken(n.data.token));case 8:case"end":return r.stop()}},null,t)})}},{key:"getTransferTokens",value:function(e,t){var n=this;return P.default.tryToDo(this.getTransferTokens,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._client.getTokens("TRANSFER",e,t));case 2:return r=a.sent,a.abrupt("return",new b.default(void 0===r.data.tokens?[]:r.data.tokens.map(function(e){return R.default.createFromToken(e)}),r.data.offset));case 4:case"end":return a.stop()}},null,n)})}},{key:"getAccessTokens",value:function(e,t){var n=this;return P.default.tryToDo(this.getAccessTokens,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._client.getTokens("ACCESS",e,t));case 2:return r=a.sent,a.abrupt("return",new b.default(void 0===r.data.tokens?[]:r.data.tokens.map(function(e){return I.default.createFromToken(e)}),r.data.offset));case 4:case"end":return a.stop()}},null,n)})}},{key:"endorseToken",value:function(e){var t=this;return P.default.tryToDo(this.endorseToken,function(){var n,r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._resolveToken(e));case 2:return n=a.sent,a.next=5,regeneratorRuntime.awrap(t._client.endorseToken(n));case 5:return r=a.sent,"string"==typeof e||e instanceof String||(e.payloadSignatures=r.data.result.token.payloadSignatures),a.abrupt("return",new T.default(r.data.result,e));case 8:case"end":return a.stop()}},null,t)})}},{key:"cancelToken",value:function(e){var t=this;return P.default.tryToDo(this.cancelToken,function(){var n,r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._resolveToken(e));case 2:return n=a.sent,a.next=5,regeneratorRuntime.awrap(t._client.cancelToken(n));case 5:return r=a.sent,"string"==typeof e||e instanceof String||(e.payloadSignatures=r.data.result.token.payloadSignatures),a.abrupt("return",new T.default(r.data.result,e));case 8:case"end":return a.stop()}},null,t)})}},{key:"createTransfer",value:function(e,t,n,r){var a=this,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return P.default.tryToDo(this.createTransfer,function(){var o,i;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(a._resolveToken(e));case 2:if(o=s.sent,void 0===t&&(t=o.payload.transfer.amount),void 0===n&&(n=o.payload.transfer.currency),!(P.default.countDecimals(t)>E.maxDecimals)){s.next=7;break}throw new Error("Number of decimals in amount should be at most "+E.maxDecimals);case 7:return s.next=9,regeneratorRuntime.awrap(a._client.createTransfer(o,t,n,r,u));case 9:return i=s.sent,s.abrupt("return",new S.default(i.data.transfer));case 11:case"end":return s.stop()}},null,a)})}},{key:"getTransfer",value:function(e){var t=this;return P.default.tryToDo(this.getTransfer,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.getTransfer(e));case 2:return n=r.sent,r.abrupt("return",new S.default(n.data.transfer));case 4:case"end":return r.stop()}},null,t)})}},{key:"getTransfers",value:function(e,t,n){var r=this;return P.default.tryToDo(this.getTransfers,function(){var a;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap(r._client.getTransfers(e,t,n));case 2:return a=u.sent,u.abrupt("return",new b.default(a.data.transfers.map(function(e){return new S.default(e)}),a.data.offset));case 4:case"end":return u.stop()}},null,r)})}},{key:"getPublicKeys",value:function(){var e=this;return P.default.tryToDo(this.getPublicKeys,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._getMember());case 2:return t=n.sent,n.abrupt("return",t.keys);case 4:case"end":return n.stop()}},null,e)})}},{key:"_getPreviousHash",value:function(){var e=this;return P.default.tryToDo(this._getPreviousHash,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._getMember());case 2:return t=n.sent,n.abrupt("return",t.lastHash);case 4:case"end":return n.stop()}},null,e)})}},{key:"_getMember",value:function(){var e=this;return P.default.tryToDo(this._getMember,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._client.getMember());case 2:return t=n.sent,n.abrupt("return",t.data.member);case 4:case"end":return n.stop()}},null,e)})}},{key:"_resolveToken",value:function(e){var t=this;return new Promise(function(n,r){"string"==typeof e||e instanceof String?t.getToken(e).then(function(e){return n(e)}):n(e)})}},{key:"id",get:function(){return this._id}},{key:"keys",get:function(){return this._keys}}]),e}();t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(9),i=(r(o),n(3)),s=(r(i),function(){function e(){a(this,e)}return u(e,null,[{key:"saveMember",value:function(e){throw new Error("Browser Only")}},{key:"loadMember",value:function(e){throw new Error("Browser Only")}}]),e}());t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(12),i=r(o),s=n(13),c=r(s),l=n(8),f=r(l),d=function(){function e(t,n){a(this,e),this._member=t,this._id=n.id,this._name=n.name,this._bankId=n.bankId}return u(e,[{key:"getBalance",value:function(){var e=this;return f.default.tryToDo(this.getBalance,function(){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e._member._client.getBalance(e._id));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}},null,e)})}},{key:"getTransaction",value:function(e){var t=this;return f.default.tryToDo(this.getTransaction,function(){var n;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._member._client.getTransaction(t._id,e));case 2:return n=r.sent,r.abrupt("return",new c.default(n.data.transaction));case 4:case"end":return r.stop()}},null,t)})}},{key:"getTransactions",value:function(e,t){var n=this;return f.default.tryToDo(this.getTransactions,function(){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(n._member._client.getTransactions(n._id,e,t));case 2:return r=a.sent,a.abrupt("return",new i.default(r.data.transactions.map(function(e){return new c.default(e)}),r.data.offset));case 4:case"end":return a.stop()}},null,n)})}},{key:"member",get:function(){return this._member}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"bankId",get:function(){return this._bankId}}]),e}();t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){n(this,e),this._data=t,this._offset=r}return r(e,[{key:"data",get:function(){return this._data}},{key:"offset",get:function(){return this._offset}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this._id=t.id,this._type=t.type,this._currency=t.amount.currency,this._amount=parseFloat(t.amount.value),this._description=t.description,this._tokenId=t.tokenId,this._tokenTransferId=t.tokenTransferId}return r(e,[{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"amount",get:function(){return this._amount}},{key:"currency",get:function(){return this._currency}},{key:"description",get:function(){return this._description}},{key:"tokenId",get:function(){return this._tokenId}},{key:"tokenTransferId",get:function(){return this._tokenTransferId}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this._id=t.id,this._target=t.target,this._platform=t.platform}return r(e,[{key:"id",get:function(){return this._id}},{key:"target",get:function(){return this._target}},{key:"platform",get:function(){return this._platform}}]),e}();t.default=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this._id=t.id,this._name=t.name,this._address=t.address,this._addressSignature=t.addressSignature}return r(e,[{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"address",get:function(){return this._address}},{key:"addressSignature",get:function(){return this._addressSignature}}]),e}();t.default=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={PRIVILEGED:"PRIVILEGED",STANDARD:"STANDARD",LOW:"LOW"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),i=r(o),s=n(8),c=r(s),l=n(18),f=r(l),d=n(20),h=r(d),y=n(19),v=n(16),p=r(v),m=n(7),g=n(21),_=function(){function e(t,n,r){a(this,e),this._instance=g.create({baseURL:y.urls[t]}),this._memberId=n,this._keys=r,this._context=new h.default,this._authHeader=new f.default(y.urls[t],r),this._resetInterceptor()}return u(e,[{key:"_resetInterceptor",value:function(){var e=this;this._instance.interceptors.request.eject(this._interceptor),this._interceptor=this._instance.interceptors.request.use(function(t){return e._authHeader.addAuthorizationHeaderMemberId(e._memberId,t,e._context),t})}},{key:"useAccessToken",value:function(e){this._context.onBehalfOf=e,this._resetInterceptor()}},{key:"clearAccessToken",value:function(){this._context.onBehalfOf=void 0,this._resetInterceptor()}},{key:"subscribeToNotifications",value:function(e,t){var n={target:e,platform:t},r={method:"post",url:"/subscribers",data:n};return this._instance(r)}},{key:"getSubscribers",value:function(){var e={method:"get",url:"/subscribers"};return this._instance(e)}},{key:"getSubscriber",value:function(e){var t={method:"get",url:"/subscribers/"+e};return this._instance(t)}},{key:"unsubscribeFromNotifications",value:function(e){var t={method:"delete",url:"/subscribers/"+e};return this._instance(t)}},{key:"addAddress",value:function(e,t){var n={name:e,address:t,addressSignature:{memberId:this._memberId,keyId:this._keys.keyId,signature:i.default.signJson(t,this._keys)}},r={method:"post",url:"/addresses",data:n};return this._instance(r)}},{key:"getAddress",value:function(e){var t={method:"get",url:"/addresses/"+e};return this._instance(t)}},{key:"getAddresses",value:function(){var e={method:"get",url:"/addresses"};return this._instance(e)}},{key:"linkAccounts",value:function(e,t){var n={bankId:e,accountLinkPayloads:t},r={method:"post",url:"/accounts",data:n};return this._instance(r)}},{key:"getAccounts",value:function(){var e={method:"get",url:"/accounts"};return this._instance(e)}},{key:"setAccountName",value:function(e,t){var n={method:"patch",url:"/accounts/"+e+"?name="+t};return this._instance(n)}},{key:"getBalance",value:function(e){var t={method:"get",url:"/accounts/"+e+"/balance"};return this._instance(t)}},{key:"getTransaction",value:function(e,t){var n={method:"get",url:"/accounts/"+e+"/transactions/"+t};return this._instance(n)}},{key:"getTransactions",value:function(e,t,n){var r={method:"get",url:"/accounts/"+e+"/transactions?offset="+t+"&limit="+n};return this._instance(r)}},{key:"createToken",value:function(e){var t={method:"post",url:"/tokens",data:{payload:e}};return this._instance(t)}},{key:"replaceToken",value:function(e,t){var n=e.id,r=this._tokenOperationRequest(e,"cancelled"),a={payload:t.json},u={method:"post",url:"/tokens/"+n+"/replace",data:{cancel_token:r,create_token:a}};return this._instance(u)}},{key:"replaceAndEndorseToken",value:function(e,t){var n=e.id,r=this._tokenOperationRequest(e,"cancelled"),a={payload:t.json,payload_signature:this._tokenOperationSignature(t,"endorsed")},u={method:"post",url:"/tokens/"+n+"/replace",data:{cancel_token:r,create_token:a}};return this._instance(u)}},{key:"endorseToken",value:function(e){return this._tokenOperation(e,"endorse","endorsed")}},{key:"cancelToken",value:function(e){return this._tokenOperation(e,"cancel","cancelled")}},{key:"createTransfer",value:function(e,t,n,r,a){var u={
nonce:c.default.generateNonce(),tokenId:e.id,amount:{value:t.toString(),currency:n}};r&&(u.description=r),void 0!==a&&a.length>0&&(u.destinations=a);var o={payload:u,payloadSignature:{memberId:this._memberId,keyId:this._keys.keyId,signature:i.default.signJson(u,this._keys)}},s={method:"post",url:"/transfers",data:o};return this._instance(s)}},{key:"getToken",value:function(e){var t={method:"get",url:"/tokens/"+e};return this._instance(t)}},{key:"getTokens",value:function(e,t,n){var r={method:"get",url:"/tokens?type="+e+"&offset="+t+"&limit="+n};return this._instance(r)}},{key:"_tokenOperation",value:function(e,t,n){var r=e.id,a={method:"put",url:"/tokens/"+r+"/"+t,data:this._tokenOperationRequest(e,n)};return this._instance(a)}},{key:"_tokenOperationRequest",value:function(e,t){return{tokenId:e.id,signature:this._tokenOperationSignature(e,t)}}},{key:"_tokenOperationSignature",value:function(e,t){var n=m(e.json)+("."+t);return{memberId:this._memberId,keyId:this._keys.keyId,signature:i.default.sign(n,this._keys)}}},{key:"getTransfer",value:function(e){var t={method:"get",url:"/transfers/"+e};return this._instance(t)}},{key:"getTransfers",value:function(e,t,n){var r={method:"get",url:"/transfers?tokenId="+e+"&offset="+t+"&limit="+n};return this._instance(r)}},{key:"getMember",value:function(){var e={method:"get",url:"/members"};return this._instance(e)}},{key:"addKey",value:function(e,t,n){var r={memberId:this._memberId,addKey:{publicKey:i.default.strKey(t)}};return n!==p.default.PRIVILEGED&&(r.addKey.level=n),this._memberUpdate(r,e)}},{key:"removeKey",value:function(e,t){var n={memberId:this._memberId,removeKey:{keyId:t}};return this._memberUpdate(n,e)}},{key:"addUsername",value:function(e,t){var n={memberId:this._memberId,addUsername:{username:t}};return this._memberUpdate(n,e)}},{key:"removeUsername",value:function(e,t){var n={memberId:this._memberId,removeUsername:{username:t}};return this._memberUpdate(n,e)}},{key:"_memberUpdate",value:function(e,t){""!==t&&(e.prevHash=t);var n={update:e,updateSignature:{memberId:this._memberId,keyId:this._keys.keyId,signature:i.default.signJson(e,this._keys)}},r={method:"post",url:"/members/"+this._memberId+"/updates",data:n};return this._instance(r)}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(19),i=n(3),s=r(i),c=n(7),l=function(){function e(t,n){a(this,e),this._baseUrl=t,this._keys=n}return u(e,[{key:"addAuthorizationHeaderMemberId",value:function(e,t,n){var r="member-id="+e;this.addAuthorizationHeader(r,t,n)}},{key:"addAuthorizationHeaderUsername",value:function(e,t,n){var r="username="+e;this.addAuthorizationHeader(r,t,n)}},{key:"addAuthorizationHeader",value:function(t,n,r){var a=n.url.replace(this._baseUrl,"");a="/"===a.substring(0,1)?a:a+"/",a="/"===a.substring(a.length-1)?a.substring(0,a.length-1):a,a.indexOf("?")>=0&&(a=a.substring(0,a.indexOf("?")));var u={method:n.method.toUpperCase(),uriHost:this._baseUrl.replace("http://","").replace("https://",""),uriPath:a};void 0!==n.data&&""!==n.data&&(u.requestBody=c(n.data)),n.url.indexOf("?")!==-1&&(u.queryString=n.url.substring(n.url.indexOf("?")+1));var i=s.default.signJson(u,this._keys),l=o.signatureScheme+" "+t+",key-id="+this._keys.keyId+",signature="+i+e._onBehalfOfHeader(r);n.headers={Authorization:l}}}],[{key:"_onBehalfOfHeader",value:function(e){return void 0!==e&&void 0!==e.onBehalfOf&&""!==e.onBehalfOf?",on-behalf-of="+e.onBehalfOf:""}}]),e}();t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="Token-Ed25519-SHA512",r={local:"http://localhost:8000",dev:"http://dev.api.token.io",stg:"http://stg.api.token.io",prd:"http://prd.api.token.io"},a="1.0",u="1.0",o="EUR",i=4;t.signatureScheme=n,t.urls=r,t.transferTokenVersion=a,t.accessTokenVersion=u,t.defaultCurrency=o,t.maxDecimals=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){n(this,e),this._onBehalfOf=void 0}return r(e,[{key:"onBehalfOf",set:function(e){this._onBehalfOf=e},get:function(){return this._onBehalfOf}}]),e}();t.default=a},function(e,t){e.exports=require("axios")},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,r){n(this,e),this._status=t.status,this._token=r}return r(e,[{key:"status",get:function(){return this._status}},{key:"token",get:function(){return this._token}}],[{key:"Status",get:function(){return{INVALID:"INVALID",SUCCESS:"SUCCESS",MORE_SIGNATURES_NEEDED:"MORE_SIGNATURES_NEEDED"}}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=r(o),s=n(19),c=function(){function e(t,n,r,u,o,c,l){var f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:s.transferTokenVersion,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:void 0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:void 0,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[];if(a(this,e),i.default.countDecimals(u)>s.maxDecimals)throw new Error("Number of decimals in amount should be at most "+s.maxDecimals);this._id=t,this._from=n,this._instructions=r,this._amount=u,this._currency=o,this._redeemer=c,this._description=l,this._version=f,this._issuer=d,this._nonce=h,this._payloadSignatures=y,void 0===h&&(this._nonce=i.default.generateNonce())}return u(e,null,[{key:"createFromToken",value:function(t){var n=t.id,r=t.payload.from,a=t.payload.transfer.instructions,u=parseFloat(t.payload.transfer.amount),o=t.payload.transfer.currency,i=t.payload.transfer.redeemer,s=t.payload.description,c=t.payload.version,l=t.payload.issuer,f=t.payload.nonce,d=t.payloadSignatures;return new e(n,r,a,u,o,i,s,c,l,f,d)}},{key:"create",value:function(t,n,r,a,u,o){var i={id:t.id},s={username:u},c={source:{accountId:n}};return new e(void 0,i,c,r,a,s,o)}}]),u(e,[{key:"payloadSignatures",set:function(e){this._payloadSignatures=[];var t=!0,n=!1,r=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var o=a.value;this._payloadSignatures.push(o)}}catch(e){n=!0,r=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw r}}},get:function(){return this._payloadSignatures}},{key:"id",get:function(){return this._id}},{key:"from",get:function(){return this._from}},{key:"amount",get:function(){return this._amount}},{key:"currency",get:function(){return this._currency}},{key:"redeemer",get:function(){return this._redeemer}},{key:"description",get:function(){return this._description}},{key:"version",get:function(){return this._version}},{key:"issuer",get:function(){return this._issuer}},{key:"nonce",get:function(){return this._nonce}},{key:"json",get:function(){var e={version:this._version,nonce:this._nonce,from:this._from,transfer:{currency:this._currency,amount:this._amount.toString(),instructions:this._instructions}};return void 0!==this._redeemer&&(e.transfer.redeemer=this._redeemer),""!==this._description&&(e.description=this._description),void 0!==this._issuer&&(e.issuer=this._issuer),e}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(8),i=r(o),s=n(19),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.accessTokenVersion,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,l=arguments[6],f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];a(this,e),this._to=t,this._from=n,this._resources=r,this._id=u,this._version=o,this._nonce=c,this._issuer=l,this._payloadSignatures=f,void 0===c&&(this._nonce=i.default.generateNonce())}return u(e,null,[{key:"grantTo",value:function(t){return new e({username:t})}},{key:"createFromToken",value:function(t){return new e(t.payload.to,t.payload.from,t.payload.access.resources,t.id,t.payload.version,t.payload.nonce,t.payload.issuer,t.payloadSignatures)}},{key:"createFromAccessToken",value:function(t){return new e(t.toMember,t.fromMember,[],void 0,s.accessTokenVersion,void 0,t.issuer,[])}}]),u(e,[{key:"forAllAddresses",value:function(){var e={allAddresses:{}};return this._resources.push(e),this}},{key:"forAddress",value:function(e){var t={address:{addressId:e}};return this._resources.push(t),this}},{key:"forAllAccounts",value:function(){var e={allAccounts:{}};return this._resources.push(e),this}},{key:"forAccount",value:function(e){var t={account:{accountId:e}};return this._resources.push(t),this}},{key:"forAllTransactions",value:function(){var e={allTransactions:{}};return this._resources.push(e),this}},{key:"forAccountTransactions",value:function(e){var t={transactions:{accountId:e}};return this._resources.push(t),this}},{key:"forAllBalances",value:function(){var e={allBalances:{}};return this._resources.push(e),this}},{key:"forAccountBalances",value:function(e){var t={balance:{accountId:e}};return this._resources.push(t),this}},{key:"forAll",value:function(){return this.forAllAddresses().forAllAccounts().forAllBalances().forAllTransactions()}},{key:"from",value:function(e){return this._from={id:e.id},this}},{key:"payloadSignatures",set:function(e){this._payloadSignatures=[];var t=!0,n=!1,r=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var o=a.value;this._payloadSignatures.push(o)}}catch(e){n=!0,r=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw r}}},get:function(){return this._payloadSignatures}},{key:"json",get:function(){return{version:this._version,nonce:this._nonce,from:this._from,to:this._to,issuer:this._issuer,access:{resources:this._resources}}}},{key:"id",get:function(){return this._id}},{key:"version",get:function(){return this._version}},{key:"nonce",get:function(){return this._nonce}},{key:"fromMember",get:function(){return this._from}},{key:"toMember",get:function(){return this._to}},{key:"issuer",get:function(){return this._issuer}},{key:"resources",get:function(){return this._resources}}]),e}();t.default=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this._id=t.id,this._referenceId=t.referenceId,this._payload=JSON.parse(JSON.stringify(t.payload)),this._payloadSignatures=JSON.parse(JSON.stringify(t.payloadSignatures)),this._description=t.description}return r(e,[{key:"id",get:function(){return this._id}},{key:"referenceId",get:function(){return this._referenceId}},{key:"payload",get:function(){return this._payload}},{key:"amount",get:function(){return this._payload.amount.value}},{key:"currency",get:function(){return this._payload.amount.currency}},{key:"instructions",get:function(){return this._payload.instructions}},{key:"payloadSignatures",get:function(){return this._payloadSignatures}},{key:"description",get:function(){return this._description}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(3),i=r(o),s=n(16),c=r(s),l=n(19),f=n(21),d=function(){function e(t){a(this,e),this._instance=f.create({baseURL:l.urls[t]})}return u(e,[{key:"createMemberId",value:function(){var e={method:"post",url:"/members"};return this._instance(e)}},{key:"usernameExists",value:function(e){var t={method:"get",url:"/username-exists?username="+e};return this._instance(t)}},{key:"notify",value:function(e,t){var n={username:e,notification:t},r={method:"post",url:"/notify",data:n};return this._instance(r)}},{key:"addFirstKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.PRIVILEGED,r={memberId:t,addKey:{publicKey:i.default.strKey(e.publicKey)}};n!==c.default.PRIVILEGED&&(r.addKey.level=n);var a={update:r,updateSignature:{memberId:t,keyId:e.keyId,signature:i.default.signJson(r,e)}},u={method:"post",url:"/members/"+t+"/updates",data:a};return this._instance(u)}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(18),i=r(o),s=n(19),c=(n(7),n(21)),l=function(){function e(t,n,r){a(this,e),this._instance=c.create({baseURL:s.urls[t]});var u=new i.default(s.urls[t],r);this._instance.interceptors.request.use(function(e){return u.addAuthorizationHeaderUsername(n,e,void 0),e})}return u(e,[{key:"getMemberByUsername",value:function(){var e={method:"get",url:"/members"};return this._instance(e)}}]),e}();t.default=l},function(e,t){e.exports=require("es6-promise")}])});